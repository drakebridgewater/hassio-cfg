/* ===== GENERAL BUBBLE CARD STYLING ===== */
.bubble-card {
    border-radius: var(--bubble-border-radius, 12px);
    padding: var(--bubble-padding, 16px);
    background-color: var(--bubble-background, rgba(243, 243, 244, 0.9));
    color: var(--bubble-color, var(--primary-text-color));
    transition: all 0.3s ease;
}

.bubble-icon-container {
    position: relative !important;
    /* Force relative positioning */
    overflow: visible !important;
    /* Make sure badges can be seen outside container */
}

.bubble-icon-container::after {
    border-radius: 100%;
}

.bubble-icon-container {
    position: relative !important;
    /* Force relative positioning */
    overflow: visible !important;
    /* Make sure badges can be seen outside container */
}

.badge {
    position: absolute;
    z-index: 10;
}

/* Make sure these positions are relative to closest positioned ancestor */
.bubble-badge {
    position: absolute;
    top: -8px;
    right: -8px;
    z-index: 10;
}

.bubble-entity-picture {
    border-radius: var(--bubble-icon-border-radius, var(--bubble-border-radius, 50%));
}

.bubble-sub-button {
    border-radius: var(--bubble-border-radius, 12px);
    background-color: var(--bubble-sub-button-background, rgba(255, 255, 255, 0.7));
    color: var(--bubble-sub-button-color, var(--primary-text-color));
}

/* ===== ROOM-SPECIFIC STYLING ===== */
.kitchen-card {
    --room-primary-color: var(--kitchen-color, rgb(224, 164, 88));
}

.living-room-card {
    --room-primary-color: var(--living-room-color, rgb(109, 158, 235));
}

.bedroom-card {
    --room-primary-color: var(--bedroom-color, rgb(156, 39, 176));
}

.child-room-card {
    --room-primary-color: var(--child-room-color, rgb(76, 175, 80));
}

.office-card {
    --room-primary-color: var(--office-color, rgb(121, 85, 72));
}

.outdoor-card {
    --room-primary-color: var(--outdoor-color, rgb(67, 160, 71));
}

/* Colored borders for room cards */
.kitchen-card .bubble-icon-container::after {
    border: 2px solid var(--room-primary-color);
}

.living-room-card .bubble-icon-container::after {
    border: 2px solid var(--room-primary-color);
}

.bedroom-card .bubble-icon-container::after {
    border: 2px solid var(--room-primary-color);
}

.child-room-card .bubble-icon-container::after {
    border: 2px solid var(--room-primary-color);
}

.office-card .bubble-icon-container::after {
    border: 2px solid var(--room-primary-color);
}

.outdoor-card .bubble-icon-container::after {
    border: 2px solid var(--room-primary-color);
}

/* ===== STATE STYLING ===== */
.state-on {
    color: var(--state-on-color, var(--success-color)) !important;
}

.state-off {
    color: var(--state-off-color, var(--disabled-text-color)) !important;
}

.state-unavailable {
    color: var(--state-unavailable-color, var(--disabled-text-color)) !important;
    font-style: italic;
    opacity: 0.7;
}

.state-alert {
    color: var(--state-alert-color, var(--error-color)) !important;
    animation: blink var(--animation-blink-duration, 2s) ease infinite;
}

/* ===== BADGE STYLING ===== */
.badge {
    display: flex;
    align-items: center;
    justify-content: center;
    position: absolute;
    z-index: 1;
    background: var(--badge-background, var(--primary-color));
    color: var(--badge-color, var(--primary-text-color));
    font-size: 12px;
    height: 20px;
    width: 20px;
    border-radius: 50%;
    --mdc-icon-size: 12px;
    box-sizing: border-box;
}

.badge.text {
    border-radius: 10px;
    padding: 0 4px;
    width: auto;
    min-width: 20px;
}

.badge.position-1 { top: -8px; right: -8px; }
.badge.position-2 { bottom: -8px; right: -8px; }
.badge.position-3 { bottom: -8px; left: -8px; }
.badge.position-4 { top: -8px; left: -8px; }

.badge-warning {
    background-color: var(--badge-warning-background, var(--warning-color));
    color: var(--badge-warning-color, black);
}

.badge-error {
    background-color: var(--badge-error-background, var(--error-color));
    color: var(--badge-error-color, white);
}

.badge-info {
    background-color: var(--badge-info-background, var(--info-color));
    color: var(--badge-info-color, white);
}

/* ===== ANIMATION KEYFRAMES ===== */
@keyframes blink {
    50% {
        opacity: 0;
    }
}

@keyframes slow-rotate {
    0% {
        transform: rotate(0deg);
    }

    100% {
        transform: rotate(360deg);
    }
}

@keyframes pulse {
    0% {
        transform: scale(1);
    }

    50% {
        transform: scale(1.1);
    }

    100% {
        transform: scale(1);
    }
}

.rotate {
    animation: slow-rotate var(--animation-rotate-duration, 2s) linear infinite;
}

.blink {
    animation: blink var(--animation-blink-duration, 2s) ease infinite;
}

.pulse {
    animation: pulse var(--animation-pulse-duration, 1.5s) ease infinite;
}

/* ===== RESPONSIVE STYLING ===== */
@media (max-width: 600px) {
    .bubble-card {
        --bubble-border-radius: 16px;
        --bubble-padding: 12px;
    }

    .badge {
        font-size: 10px;
        height: 16px;
        width: 16px;
    }
}

/* ===== STATUS TEXT STYLING ===== */
.bubble-state {
    opacity: var(--status-text-opacity, 1);
    transition: opacity 0.3s ease;
    font-size: 0.9em;
}

.status-unavailable {
    opacity: 0.7;
    font-style: italic;
}

/* ===== ERROR HANDLING AND FALLBACKS ===== */
.error-message {
    color: var(--error-color);
    font-size: 0.8em;
    padding: 4px;
    border-radius: 4px;
    background: rgba(255, 0, 0, 0.1);
}

/* Fallback for when entity is unavailable */
.entity-unavailable {
    opacity: 0.5;
    pointer-events: none;
}

/* Hide error messages by default */
.error-container {
    display: none;
}

/* Show error messages when there's an error */
.has-error .error-container {
    display: block;
}